<div class="navbar bg-base-100 drop-shadow-lg rounded-full relative z-50 mb-8">
  <div class="navbar-start">
    <div class="dropdown">
      <label tabindex="0" class="btn btn-ghost btn-circle">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7" /></svg>
      </label>
      <ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52">
        <li><%= link_to "Home", root_url %></li>
        <li><a>Trending</a></li>
        <li><a>About</a></li>
      </ul>
    </div>
  </div>
  <div class="navbar-center">
    <% puts request.fullpath %>
    <%= link_to ApplicationController::APPLICATION_TITLE, request.fullpath == "/" ? "#" : root_url, class: "btn btn-ghost normal-case text-xl font-bold" %>
  </div>
  <div class="navbar-end">
    <button class="btn btn-ghost btn-circle">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
    </button>
    <button class="btn btn-ghost btn-circle">
      <div class="indicator">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9" /></svg>
        <span class="badge badge-xs badge-primary indicator-item"></span>
      </div>
    </button>
    <div class="dropdown dropdown-end">
      <label tabindex="0" class="btn btn-ghost btn-circle avatar">
        <div class="w-10 rounded-full">
          <% if user_signed_in? %>
            <img src="https://avatars.dicebear.com/api/personas/<%= current_user.profile.avatar_seed %>.svg" />
          <% else %>
            <img src="https://img.icons8.com/windows/452/login-as-user.png" class="scale-75 contrast-75"/>
          <% end %>
        </div>
      </label>
      <ul tabindex="0" class="menu menu-compact dropdown-content mt-3 p-2 shadow bg-base-100 rounded-box w-52">
      <% if user_signed_in? %>
        <li class="menu-title">
          <span>Account</span>
        </li>
        <li><%= link_to "Profile", profile_path(current_user) %></li>
        <li><a>Settings</a></li>
        <li><%= link_to "Log out", destroy_user_session_path, data: { turbo_method: :delete } %></li>
      <% else %>
      <li class="menu-title">
        <span>Not logged in yet</span>
      </li>
        <li><%= link_to "Log in", new_user_session_path , data: { turbo_method: :create } %></li>
        <li><%= link_to "Register", new_user_registration_path , data: { turbo_method: :create } %></li>
      <% end %>
      <li class="menu-title">
        <span>Appearance</span>
      </li>
        <li>
            <label class="label cursor-pointer">
                <span class="label-text">ðŸŒ™ Dark Mode</span>
                <input id="theme_toggle" type="checkbox" class="toggle toggle-md" data-toggle-theme="dark,light" />
            </label>
        </li>
      </ul>
    </div>
  </div>
</div>

<script>
    window.onload = function() {
        if (document.documentElement.dataset.theme == 'dark') {
            document.getElementById("theme_toggle").setAttribute('checked', "");
        }
    }
</script>